<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="initial-scale=1.0, width=device-width, viewport-fit=cover"
    />
    <link rel="me" href="https://github.com/renanpvaz" type="text/html" />
    <meta
      name="description"
      property="og:description"
      content="Hello, I'm Renan, a front-end developer based in Brazil"
    />
    <title>Renan Vaz</title>
    <meta
      name="description"
      content="Personal website for Renan Vaz"
      class="next-head"
    />
    <link rel="shortcut icon" href="assets/favicon.png" />
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <header>
      <span>Hi, Renan Vaz here</span>
      <h1>I'm a developer based in Brazil</h1>
    </header>
    <canvas></canvas>
    <article class="content">
      <p class="description">
        I build web-things and I like to use
        <code>functional programming</code> to do it. These are some of the
        people Iâ€™ve worked with:
      </p>
      <ul class="work">
        <li class="work__item">
          <a href="">Paack</a>
        </li>
        <li class="work__item">
          <a href="">Cadenza.tv</a>
        </li>
        <li class="work__item">
          <a href="">Camp Gladiator</a>
        </li>
      </ul>
    </article>
    <footer class="footer">
      <div class="theme-toggle">
        <input id="theme-toggle" class="theme-toggle__input" type="checkbox" />
        <label for="theme-toggle" class="theme-toggle__label">
          dark theme:
        </label>
      </div>
      <nav class="contact">
        <a href="">email</a>
        <a href="">github</a>
        <a href="">codepen</a>
      </nav>
    </footer>
    <div class="backdrop js-backdrop"></div>
    <script>
      let dark = false
      let mouse = { x: 0, y: 0 }
      const bgColor = '#f3f0eb'
      const bg = document.querySelector('.js-backdrop')

      const rand = (min = 0, max = 1) =>
        Math.round(Math.random() * (max - min) + min)

      const setBackground = ({ x, y }) => {
        bg.style.background = `radial-gradient(circle at ${x}px ${y}px, transparent 15%, black 40.5%)`
      }

      document.querySelector('#theme-toggle').addEventListener('change', e => {
        if (e.target.checked) {
          bg.style.display = 'block'
          setBackground({ x: 0, y: window.innerHeight })
          const meta = document.createElement('meta')

          meta.setAttribute('name', 'theme-color')
          meta.setAttribute('content', '#000')

          document.head.appendChild(meta)

          dark = true
        } else {
          bg.style.display = 'none'
          bg.style.background = bgColor
          dark = false
        }
      })

      const canvas = document.querySelector('canvas')
      const context = canvas.getContext('2d', { alpha: false })

      const size = 200
      const dpr = window.devicePixelRatio
      const halfSize = size / 2

      canvas.width = size * dpr
      canvas.height = size * dpr
      context.scale(dpr, dpr)

      const canvasX = canvas.offsetLeft
      const canvasY = canvas.offsetHeight

      context.lineCap = 'round'
      context.lineWidth = 2
      context.fillStyle = bgColor
      context.fillRect(0, 0, size, size)
      context.translate(halfSize, halfSize)

      const draw = () => {
        const relativeX = Math.abs(mouse.x - (canvasX + halfSize))
        const relativeY = Math.abs(mouse.y - (canvasY + halfSize - 80))

        if (dark) {
          setBackground(mouse)
        }

        context.fillRect(0, 0, size, size)
        context.beginPath()

        for (let index = 0; index < 20; index++) {
          context.moveTo(0, 0)

          context.rotate((rand(0, 360) * Math.PI) / 180)
          context.lineTo(rand(10, relativeX), rand(10, relativeY))
        }
        context.stroke()
      }

      document.addEventListener('mousemove', e => {
        mouse = { x: e.x, y: e.y }
        draw()
      })

      window.addEventListener(
        'scroll',
        e => {
          mouse = { x: 0, y: 0 }
          draw()
        },
        true
      )

      draw()
    </script>
  </body>
</html>
