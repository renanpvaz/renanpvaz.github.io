<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="initial-scale=1.0, width=device-width, viewport-fit=cover"
    />
    <link rel="me" href="https://github.com/renanpvaz" type="text/html" />
    <meta
      name="description"
      property="og:description"
      content="Hello, I'm Renan, a front-end developer based in Brazil"
    />
    <title>Renan Vaz</title>
    <meta
      name="description"
      content="Personal website for Renan Vaz"
      class="next-head"
    />
    <meta name="theme-color" content="#507e48" />
    <link rel="preload" href="me.jpg" as="image" />
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <header>
      <span>Hi, Renan Vaz here</span>
      <h1>I'm a developer based in Brazil</h1>
    </header>
    <canvas></canvas>
    <article class="content">
      <p class="description">
        I build web-things and I like to use
        <code>functional programming</code> to do it. These are some of the
        people Iâ€™ve worked with:
      </p>
      <ul class="work">
        <li class="work__item">Paack</li>
        <li class="work__item">Cadenza.tv</li>
        <li class="work__item">Camp Gladiator</li>
      </ul>
    </article>
    <footer>
      <div class="theme-toggle">
        <input id="theme-toggle" class="theme-toggle__input" type="checkbox" />
        <label for="theme-toggle" class="theme-toggle__label">
          dark theme:
        </label>
      </div>
      <nav class="contact">
        <a href="">email</a>
        <a href="">github</a>
        <a href="">codepen</a>
      </nav>
    </footer>
    <script>
      let dark = false
      let mouse = { x: 0, y: 0 }
      const bgColor = '#f3f0eb'

      const rand = (min = 0, max = 1) =>
        Math.round(Math.random() * (max - min) + min)

      const setBackground = ({ x, y }) => {
        document.body.style.background = `radial-gradient(circle at ${x}px ${y}px, ${bgColor} 15%, black 40.5%)`
      }

      document.querySelector('#theme-toggle').addEventListener('change', e => {
        if (e.target.checked) {
          document.body.classList.add('dark')
          setBackground({ x: 0, y: window.innerHeight })
          dark = true
        } else {
          document.body.classList.remove('dark')
          document.body.style.background = bgColor
          dark = false
        }
      })

      document.addEventListener('mousemove', e => {
        mouse = { x: e.x, y: e.y }
      })

      const canvas = document.querySelector('canvas')
      const context = canvas.getContext('2d', { alpha: false })

      const size = 250
      const step = 20
      const dpr = window.devicePixelRatio

      canvas.width = size * dpr
      canvas.height = size * dpr
      context.scale(dpr, dpr)

      const canvasX = canvas.offsetLeft
      const canvasY = canvas.offsetHeight

      context.lineCap = 'round'
      context.lineWidth = 2

      const randCoord = () => rand(0, 250)

      context.translate(size / 2, size / 2)

      const loop = () => {
        const relativeX = mouse.x - (canvasX + size / 2)
        const relativeY = mouse.y - (canvasY + size / 2 - 80)

        if (dark) {
          setBackground(mouse)
        }

        context.clearRect(0, 0, 250, 250)

        context.beginPath()

        for (let index = 0; index < 20; index++) {
          context.moveTo(0, 0)

          context.rotate((rand(0, 360) * Math.PI) / 180)
          context.lineTo(
            rand(10, Math.abs(relativeX)),
            rand(10, Math.abs(relativeY))
          )
        }
        context.stroke()

        requestIdleCallback(loop)
      }

      loop()
    </script>
  </body>
</html>
