/*
  .-''- `-'`   - '.' '- -.`    ' '-'  - -    -- `` .` .'`.-`  '-      ....'`'-`  . '`.  -   `.    .   `   -.`' '' `  -`'--. .'``'. ``  '`  '.'- -`'`. `-.-'`- - - -'`.    '`-''- '
'    .-`..------. ``.`-' '.`..`---`'.--'''.`'.....- `.--' ..`'   ..-`-.. `'' ``-- `'`. '   ' -.' .`. .`    `'`'.`.  ''`-.                                                     . ` 
-`-.``.-'-    '.`.  .  -`. . '- -  ' ' `.-`  `- '` - -` -- ' ` `-`  -  -' .'  `.'`` .``  .` '.  ..`-  ''  ..'    -. `.`-                 Always has been                      '-`
 '. - ...'''`-  `` `''``'- .-- -.''  `- '--'' '  . -  -  -.. -- '`'`'.-.`--'- .' ` .`. ` -     . -''' -  ` - ` -``` '-...                                                     . `
  .  -`'-` -  `.`.'`-'`-'`-- .-' .' ..  `-^- - -' . -'' -.-'- '''. - -' --...`' `   -`'-   '' '.  `.-' .'`-`-' .`  `--. . `` -`-- `-.'`- !r,-. ' ` .' .  ::  .'-`-'.`' .. '   .`` 
''`'...'`. -'. .'``-.- -.--`  .. `. ' !<<<*";?))?(r;=*<+:^-`-. .`.. '  ' .`- . - `   . '  ''`     `` '.'   '.``'`    `..'..   -   `. `-`'  '`  .-+vt5bMNWRHg&OSFx<   ` ` -'.`'`--`
` '.'   --.-'-' ` ` ..  ` .  ```^<;?vvvv/vivi?vivi/vvvviiiv\|">~'  . '-` --.' .  - '-  -.'- '. ''.`` '-.- `'-. '-'.- --.`--  -```..' - -- .' -)2OggWBQRRHBQWRQBgDN5i  .`   `   -- 
 .'`-..'..-.' '- '.'   - .`'+;?ivi\)\(/?/\(/(\(|?|?\()/?/()\vvviv/+, ..' ` ... ..--. -' -`` '`''` `.`--..`- '--.' - `'` `  `  '' -.  --'`'<(zORBHHBRggRHggBgRWBgDD@M4, .-'`.-'`'` 
. ``  .-..  .`.'`''-   -~<?v\?\v|)/?|(/?/?\\\\(\//|?\\)|//\\\\/)\iiv(*!.' .`` '`. '`  .-`'. ` -' .`-.  '` -``   . ''      '- ' .  '---- '+|;<r*|LYuMRgQRBRBBBHHD@NMOOk:'- '      .
.'` -- ' ''..'' .'``' ~)i(//\(?(/(?\?||(||?\)/|)/?/(|)\|\|(((||\\)\\iiv)+ '` `-''``.- '.`.'`.  - - ---'. .'  ' '-   .-   '-``.. `  `-`` '- '``'.' .>MRWRQgH&@HN&DDMOqEv  ``-'' '`-
- '` '`  '- `'`'.-..>(vv/())?\||(()?/?()//)\/?(?|?))/||)|/(?/?|\|\?||(i|iv;! ' .  -     --.-` ' . ' ' -'' .'-  ` - -.`..`''' .`   .  -  ' - .'` ` .'jh2aI5XJt3&&&&MqEXr -'.'`' `.-
'`` '`' ..` .---' <?iv|i?(()\|(?\\\?|?/?(||(?)/?(\\(/)?\|/|?/\(\(?\?/|\vv?iv"'  ` `  `-..   ..`-'  .` .  `    . '`. .`` `'. .-`. `   `.`   .'` - .!cO$NBHWOOpD&N&@OdwJ^-  ..-. `. 
--`'.'.- .`. `''!rivi\)()\(?)?/\)\\\(/|)/\)/|)|\/)/(/?|(|/(|\\(((\)\)/)(|\/iiv+. ''`.-. '  .- '-  -    .'.-.--.- . '' -.-`. .''.-'.`..,.-.'-.. ,LZk%E@NNQWWRRQ@@@DMU%Y' '       -`
-' --`` . - .- :vii\?/)?\?)))\??(|/\\\|||(/\/\/)///?/(?|?\(\|(\|(/(()(\?)\/\?ii=`' ''`.   .-`.  . `- - -' -.. .    '-`-`-`.`.-'- . ' -< '--`_}54C5@DM5YJNMMWRQQ@@DOMA\ '`-` `..`  
.'  '''.' `'. >vv|/?/|?|\||/)/))|/?|?/|()|??))/)(/(\?|\)|\|//\(|)/\??||\)|?(\\/i\  - -.' '- -'`'- ..--`'' `..  -   `- ''-'. --`  `'```._ `^zE11pHQqi?18NNBNK$ozYx]ccvv> ``-- '-.'`
 ... ` - ''- +iv/?(\/\)|(\)|\)\)\/|//)|?\(?///|\\??|?|((\?/?\(\?(vv\ii)ii((\iYiiv|'.+! .<+'  .. .  r *' ` .  .-  `-'--`- -`-'  - '-.`  ~=i5{TOQQR@w5NpaftYJ69$963i=~'^. '.. .  ---
 ---  ' `'' `:vvi\/))\|?((|)\)/(??(|)(??//?\))?(?(?|\||||\(\(?|(?|                                     ` `.-`.'`.--'`-' --'   .- ` -. ..}f;wDD@NOIOI({X@NWgQ@OOE5bND8&6Ti"r"<+_-'.
 ---'`.-- .'(vv)(?\?\\|/))|(||(/(?|/)|//(||(/??(?)|?)(/|?)|(\\)?(\       Wait, it's all ugly code        .`-' `'.` ' ---`` -- '. '..' `  ..+:TOO0Fv;/MDRWHRHRRgWgHBNRDW@qOMXX#SZUMOZY
'``.` .`.` !vi/??\?)/|/\|(\\??|||(()|?(|(\(??(?\|)||(?((\\/\)//\|\                                     '.  '`' .   . `. `. .. ``--..   ..<C1r(n0RWWHRQgRBgRWBQWgWWMH@pSmr.'-`-)N@
.-  ''-  ' <vv)|\)(||(??\))())()\\??()|()|\/(/(|)|\\(?(|(?\)|(/\()))()\/?)?)???|v)vi")\/":``` --'  ' '-' .' ..`.--'  ` - '.---... '    ` --+_:kMD@HgQRHgBRHgHRRWBBR@W0OO@p+ -;{kMM
`'  ```.`  "v?(\|)\\|))|(|\|?/|/((|)/\//|?\/?\|(\/))?/\(|)))|)|??\?//?|/?\|\?\/([eMRQgQRNDk7_ .` ` `..'. `- '-`  ' `',!-`'- ''  ~``-`  - - '>jMZw&&WgHQBWQWgQWHBQWHHQw@$#O$1OgRQgH
'   ``` ` -;vi/?/)))(\?/)?|)|?|?(?/)?|()?/)(|)/\/)?||))\|??/(/)(\?\)/\\(()|)|/"sMHRQHQgBNOO9T- .'  -`. `.  `!=\vYF$PMOEi`` -`'.` ` . `'-'`>3DOk4OwOQBRRBBBBBgHWgBHHWRfn 1p4&BWQQgW
'``' -' -' rvv\)((|(\\?(\(|/|(\?))?|?|\()|\|?/(|/))\|||)\\\?)|)/\//\|\\|)/\?/:` '"ORHQR&@OmEf` '-' `  . ''yKMNNMKJy#$GOOal!-`'..`  . `'  [05MmdOOm%MQgWWRWggBRWHWHRWWBh>Ot/ZNNggWR
-`'-   . .`+v(||/?|\\\)\\/(?)/|\)|?)))|?(//\//(/|//(?/?/)(|\||\|?()()))|(\(|<'`'`^$UME#MOOSI=  '--`- . `` ,v*=>:?vScvTTKB&MuvfY1fjntjJ45kNCMN&DRRUAM@gHQWQQRgBBRRgHRWR&E5<r1aO&@ND
`-'' -`'`-`.)i|)/(?)??|/?/|?//?|/?/)?(/()|\\)\/\|/)(\|(||()\/)|\??||/?)?|\||>`_vTwG@DRDDMdwT-    `.`.' `   .'-`.-vCo/fz5OMW@@2QgQBgHQgHRNDs&DND&RRONBRRBQHQBQggWRWgQggNP<~;YX@gWWQ
-. `'--'-. '+v|\///(()/)?|?(\\/(/\??(/|/\///)(?/((/\\/||((|?()/\()/|(?)()\/|*xsXbufMO@MS5Vn}~  ---`..' .` .`'``-`<fo2Y{YS&OGXdDDBD&NND&&WO4RQgQBQQ@QgBBgBWWBgHRBQBgHRMOpL,YkwgQgBH
 . .     ` `';iv/?\?/|?/|///)|)()??)?)(/|(\?||))\?\\//?|\()/?|?|/()|?\)|?)(?viMNJ4k$uCIet;*=i:` ''  ---`  `'-`- '`|zJ};<r]vvu#M%AUOMMpbNWaM@D@DN&DMWgQRgHBBWWHBHHHWggNOS;v$9VWRggW
 `' '`  '- -` \iv?(|??))|//))))|)()(///??/\|)\(//\\\)/(/()|?/?\?((((\)||)\|\)iIZ@@R@MMpOGEt/YefFF;-.- ``- .'.. `' . `` --'-   <">?(i{T1OB3OND&D@@&M@QQHWHWg@&@OM00qOM#9kL_#TVHHRgB
. -.- `' - `. ';v|\|?(????/|(/(|/((\|/)(?\(\/??()\\)|?(\)|((\|?/)?())\\)|/?(x9HQggg&O&euv~j{/(~iUMv '.`  ..- '  . .''``.``.--`` .--'--_dSumN@&DRQHDA0k#%NRHH&MqKdMON8uePy)/+DBgQBg
`''- -'-'.`- -`-<vv)|??()(|)\(()?\)(())(/|?)/|//||(\(||(|)\//||)\|??((|?/()79Q&O@DM@b%A"T (CxCNHRWNS;  `-. .'`' `''    . '.` ' ' `. !X9OKMRR&HDBBHgUXM@RDM@MMNQHBWgg@OOh$/=3WQHBHg
.-.--'-..-`.-  ''~)ii||i|\?||||(\??||\|\?\\\?((/\??|(|?)?|/(?)|\/(\?)((|\\vGM@e4XZVZP(),Y r*yOQRWRNbc `''.-'`' -'''.  .-' '- .` - `  V44k0@qDQQWBBROPkMNMOq945PE9d&OMbKUu\"fWgQWHH
- .. -' - -.`'-`.'`<\vvv)?)|(?\\)|?|?(\\)(?\)?/)/|))\)?\\?(/??/\|)/||(//?)Y&W@ONNNM@M<~(>~\v+0HBR@M4;*`` - ` `-`'--. .`  ``. .`-  '-  VNRBDk9Z&RQWgHpSpNQHHWRQHBBDUONDB&Si/i8HBBHW
- -  `. ...-.`. '''--+?vvvi???))(??\//(/\??((?)()?\/\\(\?||)\/\/\?(|?\/v\s2WgRBBQH@OP;,!!-;[=NQQBNMk:-' --  .`. `. --.   '.`'` -'-'-' ZQQWBBgDPZmgQg@hDHBBRWHBBQRWRg&WQB&V< ugHQHB
.`'  '' .'' `` ''  '`  ~"ivvvi?????)/?)(((/(())\(/|)|/?|\())(\\((|iivi=_`uFQWWg&&@Ew)_!   +\zBHBHNGJ .-'`.. '-'.-'' --.' `'` `` ' `  -ZRHWBRWWHQD&b@R@BHHHRHHBQHQWHBQNNOO6..1HHWRH
. ..- ..- ---' -` .--`'''-<=\vvvii?(|)/\?/|?/|/\/\??((??\//(?i)viv\*<`- >3@pD&OO@M5o>.'.'_~ }RWR&NdT .. -. .` -` `....`  ` -`'` -` - -$QHgHBWQgHgBQkX&QgBRBBBHDWBBHHW&&qs~.`>KRBQB
  .  -`   `-`'   .-^---` -.-'~+;\ivvivvvi))/\||)(|(/)\|)/viviv/;>_ '.-'  IB@@MDOMGA?< '`. -.vQBg&OS( `-.``-.' '` .'''  .- '. `  -` .  4BQWBBWHHRBBHWRWRHRHBWQgB@NRRgRH&Kx'.-<dgRRQ
.-' -..`.--.`'  ``  -`'.'``--`  `  ,>==|\ivviiiiviivvv(?*;>:_`'`` ``--`` UWBgWRDD@#> - -`'`.vgBR@Mk+. '.'--`.'-  - '`--    . '- - --- FWHHHWQWQ&WWM6DWHBHRgHgQg@QQg&WH@p> '`-e@BWg
 - ` -'` . `'.. .'''  .`- '--  `-'-`  -'  '  ^~,,!^'. .`.--'-- `.  '  '-;&WW@gBNdc>'   ' '.-)BHgNOa``'.. .-'- '..` '-   -- - ` .-  . ']RgWBWB&HWHHe>|nh0M&QWWQ&@HgWDOMMC `` `2gH@N
-  ` `-.  `. -'` '-'..'` -' `. ``- - .' - .----- .' ``- `  -''--- .``` }MQRWDNNM}:+`''--'`  iQRNM8u_.'--` --'`'''.  '''   --' ..   -.'+RggHRQRQgWQEsZDDNQWWBgWgBRQWQ&MAL -- .`UNDD
-  `   . '' `  '-- ''. ---`.- .. .   .`--   --.`--' '-- '.''. `'  -.`',M@QRB@da[~Iu .---''' _ODOGj* `  '.`.`.- `-.   .' `    `' -  ` . NHgHWD&QRQgM&&RgHWQRBWBgQWgQNG01;   .. }D&@
.` -  . '  . . '-``.-'''''- `-` --`.` --` '.`..' '` '-`---`  ' -````->O&NDDMmf\>SQ" `' .  - -;#ni^'  --.-..   .''''-.'.-  '' .--- '`  .$gHRB&&RWHBDHHNNQ@HW&WDNOmqmUAjL .` .-. SK0
'.-`_`.-     '   '` .'`'`   -- - ``  -` -' -'   - '-  -- . -..'---` 'vN&@MkO|Yu@Ht--'-`.``. ' -'-. -- `'-`'.`.` ` .  .'-` -      ' '  'LHRHQ@DgggODQRBDH@N&&&NDM&&OddMDf` -' ''~rt
'''--' `-  ``.     .-'.   ''.-.--``'  '   '- -''  .. - ''.-  '.   '`<oWW@wYv$MR&P<.. .---`. .` '.-.`-` ...-'' -``'--` - ```- `.'   ''.' VM&D&NDD36DOQHBBQBD https://asciify.me --c
''` ..'- - ,- `.   ` . -`   ' `     - -`-- `.'- '` - -` --' --`  ..?&RggWdcNNDD@W{'` .`-.'. .- `'.  ':`-` '`-` -'''.'. -' --  .   --.`-' 2&HM@X6QggMOmpOMM&DMm6k0OE7|l~' '` `..`.y
*/

let dark = false
let mouse = { x: 0, y: 0 }
const bgColor = '#f3f0eb'
const bg = document.querySelector('.js-backdrop')

const rand = (min = 0, max = 1) => Math.round(Math.random() * (max - min) + min)

const setBackground = ({ x, y }) => {
  bg.style.background = `radial-gradient(circle at ${x}px ${y}px, transparent 15%, black 40.5%)`
}

document.querySelector('#theme-toggle').addEventListener('change', e => {
  if (e.target.checked) {
    bg.style.display = 'block'
    setBackground({ x: mouse.x || 0, y: mouse.y || window.innerHeight })
    dark = true
  } else {
    bg.style.display = 'none'
    bg.style.background = bgColor
    dark = false
  }
})

const canvas = document.querySelector('canvas')
const context = canvas.getContext('2d', { alpha: false })

const size = 200
const dpr = window.devicePixelRatio
const halfSize = size / 2

canvas.width = size * dpr
canvas.height = size * dpr
context.scale(dpr, dpr)

const canvasX = canvas.offsetLeft
const canvasY = canvas.offsetHeight

context.lineCap = 'round'
context.lineWidth = 2
context.fillStyle = bgColor
context.fillRect(0, 0, size, size)
context.translate(halfSize, halfSize)

const draw = () => {
  const relativeX = Math.abs(mouse.x - (canvasX + halfSize))
  const relativeY = Math.abs(mouse.y - (canvasY + halfSize - 80))

  if (dark) {
    setBackground(mouse)
  }

  context.fillRect(0, 0, size, size)
  context.beginPath()

  for (let index = 0; index < 20; index++) {
    context.moveTo(0, 0)

    context.rotate((rand(0, 360) * Math.PI) / 180)
    context.lineTo(rand(10, relativeX), rand(10, relativeY))
  }
  context.stroke()
}

document.addEventListener('mousemove', e => {
  mouse = { x: e.x, y: e.y }
  draw()
})

window.addEventListener(
  'scroll',
  e => {
    mouse = { x: 0, y: 0 }
    draw()
  },
  true
)

draw()
